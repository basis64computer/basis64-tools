<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>BASIS-64 Tools - Administrator</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body class="d-flex flex-column h-100">
        <main class="flex-shrink-0">
            <!-- Navigation-->
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="container px-3">
                    <a class="navbar-brand" href="index.html">
                        <img src="assets/img/logo.png" width="48px" height="48px" />BASIS-64 Tools</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link" href="index.html">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="about.html">About</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="feedback.html">Feedback</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" id="navbarDropdownBlog" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false>">
                                    <img id="userProfilePhoto" src="assets/img/user.png" class="user-img" width="32px" height="32px" onload=""></img>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownBlog">
                                    <li>
                                        <a id="btn-create-account" class="dropdown-item btn-outline-dark" href="account-info.html">Lihat Akun</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- Changelog section-->
            <div class="pt-5">
                <div class="container px-3 my-1">
                    <div class="accordion mb-5" id="accordionExample">
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="headingOne">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                    <div class="d-flex flex-row h4 display-6">
                                        <i class="bi bi-menu-button-wide"></i> &nbsp;Control Panel
                                    </div>
                                </button>
                            </h3>
                            <div class="accordion-collapse collapse show" id="collapseOne" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <strong>This is the first item's accordion body.</strong> It is shown by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code> , though the transition does limit overflow.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    <div class="d-flex flex-row h4 display-6">
                                        <i class="bi bi-database"></i> &nbsp;Database
                                    </div>
                                </button>
                            </h3>
                            <div class="accordion-collapse collapse" id="collapseTwo" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <div class="card mb-4">
                                        <div class="card-header p-4 d-flex justify-content-between align-items-center">
                                            <div class="d-flex flex-row h4 display-6">
                                                <i class="bi bi-database"></i> &nbsp;Database
                                            </div>
                                            <div class="d-flex flex-row d-none d-xl-block">
                                                <div class="btn-group">
                                                    <a class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#exitModal">
                                                        <i class="bi bi-x-circle"></i> &nbsp;Batal </a>
                                                    <a class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#loadModal">
                                                        <i class="bi bi-arrow-clockwise"></i> &nbsp;Muat </a>
                                                    <a class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#saveModal">
                                                        <i class="bi bi-floppy2-fill"></i> &nbsp;Simpan </a>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="card-body" class="card-body">
                                            <table id="datatablesSimple">
                                                <thead>
                                                    <tr>
                                                        <th>No</th>
                                                        <th>Foto</th>
                                                        <th>Informasi Pengguna</th>
                                                        <th>Status</th>
                                                        <th>Batas Aktivasi</th>
                                                        <th>Lainnya</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="databaseTable"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="headingThree">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    <div class="d-flex flex-row h4 display-6">
                                        <i class="bi bi-filetype-html"></i> &nbsp;Premium Page
                                    </div>
                                </button>
                            </h3>
                            <div class="accordion-collapse collapse" id="collapseThree" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <div class="card mb-1">
                                        <div class="card-header p-4 d-flex justify-content-between align-items-center">
                                            <div class="d-flex flex-row h4 display-6">
                                                <i class="bi bi-filetype-html"></i> &nbsp;Premium Page
                                            </div>
                                            <div class="d-flex flex-row d-none d-xl-block">
                                                <div class="btn-group">
                                                    <a class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#exitModal">
                                                        <i class="bi bi-x-circle"></i> &nbsp;Batal </a>
                                                    <a class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#loadModal">
                                                        <i class="bi bi-arrow-clockwise"></i> &nbsp;Muat </a>
                                                    <a class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#addPageModal">
                                                        <i class="bi bi-filetype-html"></i> &nbsp;Buat Halaman </a>
                                                    <a class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#saveModal">
                                                        <i class="bi bi-floppy2-fill"></i> &nbsp;Simpan </a>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="card-body2" class="card-body2">
                                            <table id="datatablesSimple2">
                                                <thead>
                                                    <tr>
                                                        <th>No</th>
                                                        <th>Informasi Halaman</th>
                                                        <th>Status Premium</th>
                                                        <th>Lainnya</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="databaseTable2"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <!-- Exit modal -->
        <div id="exitModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Keluar</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Apakah kamu ingin keluar dari halaman ini?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Tidak</button>
                        <a type="button" class="btn btn-danger" href="index.html">Ya</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Load modal -->
        <div id="loadModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Muat Ulang Database</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Apakah kamu ingin memuat ulang database?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Tidak</button>
                        <button type="button" class="btn btn-warning" data-bs-dismiss="modal" onclick="loadAdminDatabaseTable();">Ya</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Save modal -->
        <div id="saveModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Simpan</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Apakah kamu ingin menyimpan semua perubahan database?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Tidak</button>
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="saveDatabase();">Ya</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Login modal -->
        <div id="loginModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Login</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p id="loginModalText"></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Tutup</button>
                        <button type="button" class="btn btn-danger" id="sendMessageButton">Login</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Send message modal -->
        <div id="sendMessageModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Kirim Pesan</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Kirim pesan</p>
                        <div class="form-floating mb-3">
                            <input class="form-control" id="sendBroadcastInput" type="text" placeholder="Name" data-sb-validations="required" required />
                            <label for="activateAccountConfirmationInput">Pesan</label>
                            <div class="invalid-feedback" data-sb-feedback="activateAccountConfirmationInput:required">Harus diisi.</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Tutup</button>
                        <button type="button" class="btn btn-danger" id="sendMessageButton">Kirim</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Delete account modal -->
        <div id="deleteAccountModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Hapus Akun</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Apakah kamu ingin menghapus ini dari database?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Tidak</button>
                        <button type="button" class="btn btn-danger" id="deleteAccountConfirmationButton">Ya</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Delete premium page modal -->
        <div id="deletePremiumPageModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Hapus Halaman</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Apakah kamu ingin menghapus halaman ini dari database?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Tidak</button>
                        <button type="button" class="btn btn-danger" id="deletePageConfirmationButton">Ya</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Add page modal -->
        <div id="addPageModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Buat Halaman</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="form-floating mb-3">
                            <input class="form-control" id="addPageInput" type="text" placeholder="Name" data-sb-validations="required" required />
                            <label for="activateAccountConfirmationInput">ID</label>
                            <div class="invalid-feedback" data-sb-feedback="activateAccountConfirmationInput:required">Harus diisi.</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Tutup</button>
                        <button type="button" class="btn btn-primary" onclick="addPageDatabase();">Simpan</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Page name modal -->
        <div id="pageNameModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Info</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>ID halaman harus diisi.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Tutup</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Page name modal -->
        <div id="pageAlreadyAddedModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Info</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Halaman ini sudah dibuat.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Tutup</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Page saved modal -->
        <div id="pageSavedModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Info</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Halaman tersimpan.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Tutup</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Database saved modal -->
        <div id="databaseSavedModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Info</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Database tersimpan.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Tutup</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer-->
        <footer class="bg-dark py-4 mt-auto">
            <div class="container px-5">
                <div class="row align-items-center justify-content-between flex-column flex-sm-row">
                    <div class="col-auto">
                        <div class="small m-0 text-white">Copyright &copy; BASIS-64 2024</div>
                    </div>
                    <div class="col-auto">
                        <a class="link-light small" href="#!">Privacy</a>
                        <span class="text-white mx-1">&middot;</span>
                        <a class="link-light small" href="#!">Terms</a>
                        <span class="text-white mx-1">&middot;</span>
                        <a class="link-light small" href="#!">Contact</a>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js" integrity="sha256-/H4YS+7aYb9kJ5OKhFYPUjSJdrtV6AeyJOtTkw6X72o=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://basis64computer.github.io/basis64-website/js/feedback.js"></script>
        <script src="js/jquery.min.js" type="text/javascript"></script>
        <script src="js/linedtextarea.js"></script>
        <link href="css/linedtextarea.css" type="text/css" rel="stylesheet" />
        <script src="js/datatables-simple-demo.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script src="js/icons.js"></script>
        <script src="js/admin.js"></script>
        <script src="js/cookie.js"></script>
        <script src="js/visitor.js"></script>
        <script src="js/database.js"></script>
        <script type="text/javascript">
            initialize();
            async function initialize() {
                document.getElementById('userProfilePhoto').src = await getCookiePhoto();
            }
            let password = getCookie("admin");
            const iv = CryptoJS.enc.Utf8.parse('678025308de70905');
            const keyutf = CryptoJS.enc.Utf8.parse(password);
            let encrypted = CryptoJS.AES.encrypt(password, keyutf, {
                iv: iv
            });
            if (encrypted != defaultPassword) {
                window.location.replace("admin-login.html");
                setCookie("admin", "");
            }
            setCookie("admin", "");
            let cardbody01 = document.getElementById("card-body");
            let cardbody02 = document.getElementById("card-body2");
            let table02 = document.getElementById("databaseTable2");
            let table01 = document.getElementById("databaseTable");
            let datatablesSimple02 = document.getElementById("datatablesSimple2");
            let datatablesSimple01 = document.getElementById("datatablesSimple");
            loadAdminDatabaseTable();

            function createNewTable() {
                cardbody01.innerHTML = "";
                let table = document.createElement("table");
                table.setAttribute("id", "datatablesSimple");
                table.innerHTML = ' <thead><tr><th>No</th><th>Foto</th><th>Informasi Pengguna</th><th>Status</th><th>Batas Aktivasi</th><th>Lainnya</th></tr></thead><tbody id="databaseTable"></tbody>';
                cardbody01.appendChild(table);
                //contactTableBody = document.getElementById("contactTableBody");
                table01 = document.getElementById('databaseTable');
                datatablesSimple01 = document.getElementById("datatablesSimple");
            }
            async function loadAdminDatabaseTable() {
                record = null;
                userCount = null;
                pages = null;
                database = null;
                await initializeDatabase();
                refreshTable();
            }

            function saveDatabase() {
                let req = new XMLHttpRequest();
                req.onreadystatechange = () => {
                    if (req.readyState == XMLHttpRequest.DONE) {
                        //console.log(req.responseText);
                    }
                };
                record.pages = pages;
                record.database = database;
                console.log("save database: " + JSON.stringify(record));
                req.open("POST", databaseURL, true);
                req.setRequestHeader("Content-Type", "application/json");
                req.send(JSON.stringify(record));
                $("#databaseSavedModal").modal("show");
            }

            async function refreshTable() {
                createNewTable();
                console.log("refreshTable " + JSON.stringify(pages));
                table02.innerHTML = "";
                table01.innerHTML = "";
                for (var i = 0; i < database.length; i++) {
                    if (database[i]) {
                        let lastOnline = database[i].last_online;
                        let IP = database[i].ip;
                        let city = database[i].city;
                        let region = database[i].region;
                        let country = database[i].country;
                        var d = new Date(lastOnline);
                        let date = formatDate(d, "dddd, dd MMMM yyyy - HH:mm:ss");
                        //console.log(parseDatabasePhoto(database[i].photo));
                        addUserTable(i, await parseDatabasePhoto(database[i].photo), database[i].id, "Nama: " + database[i].name + "<br/>ID: " + database[i].id + "<br/>Cookie ID: " + database[i].cookie + "<br/>Dynamic ID: " + (10000001 + i) + "<br/>Last online: " + date + "<br/>IP: " + IP + "<br/>Location: " + city + ", " + region + ", " + country, database[i].activated, database[i].activation_expired);
                        }
                    }
                    table02.innerHTML = "";
                    pagesObjectKey = Object.keys(pages);
                    for (var i = 0; i < pagesObjectKey.length; i++) {
                        addPremiumPageTable(i, pagesObjectKey[i], pages[pagesObjectKey[i]]);
                        //console.log(pagesObjectKey[i]);
                    }
                    new simpleDatatables.DataTable(datatablesSimple01);
                    //new simpleDatatables.DataTable(table02);
                    //update_tables();
                }

                function addPageDatabase() {
                    let input = document.getElementById("addPageInput");
                    console.log("input value: " + input.value);
                    if (pages.hasOwnProperty(input.value)) {
                        $("#addPageModal").modal("hide");
                        $("#pageAlreadyAddedModal").modal("show");
                    } else if (input.value) {
                        array = Object.keys(pages);
                        pages[input.value] = false;
                        addPremiumPageTable(array.length, input.value, false);
                        update_tables();
                        console.log(pages);
                        $("#addPageModal").modal("hide");
                        $("#pageAddedModal").modal("show");
                    } else {
                        $("#addPageModal").modal("hide");
                        $("#pageNameModal").modal("show");
                    }
                }

                function createText(text) {
                    let textElement = document.createElement("p");
                }

                function createImg(src, imgClass, width, height) {
                    img = document.createElement("img");
                    img.setAttribute("src", src);
                    img.setAttribute("class", imgClass);
                    img.setAttribute("width", width);
                    img.setAttribute("height", height);
                    return img;
                }

                function createButton(text, id, btnClass, onclick) {
                    button = document.createElement("button");
                    button.setAttribute("class", btnClass);
                    button.setAttribute("onclick", onclick);
                    button.setAttribute("id", id);
                    button.appendChild(document.createTextNode(text));
                    return button;
                }

                function createSwitch(text, id, status, onclick) {
                    btnSwitch = document.createElement("div");
                    btnSwitch.setAttribute("class", "form-check form-switch");
                    inputSwitch = document.createElement("input");
                    inputSwitch.setAttribute("class", "form-check-input");
                    inputSwitch.setAttribute("type", "checkbox");
                    inputSwitch.setAttribute("role", "switch");
                    //inputSwitch.setAttribute("data-on", "true");
                    //inputSwitch.setAttribute("data-off", "false");
                    inputSwitch.setAttribute("id", id);
                    inputSwitch.setAttribute("onclick", onclick);
                    (status) ? inputSwitch.setAttribute('checked', true): inputSwitch.removeAttribute('checked');
                    label = document.createElement("label");
                    label.setAttribute("class", "form-check-label");
                    label.setAttribute("for", id);
                    label.appendChild(document.createTextNode(text));
                    btnSwitch.appendChild(inputSwitch);
                    btnSwitch.appendChild(label);
                    return btnSwitch;
                }

                function createDateInput(id, value, onchange) {
                    inputDate = document.createElement("input");
                    inputDate.setAttribute("class", "form-control");
                    inputDate.setAttribute("onchange", onchange);
                    inputDate.setAttribute("type", "date");
                    inputDate.setAttribute("id", id);
                    //var date = new Date(value * 1000);
                    //var currentDate = date.toISOString().substring(0,10);
                    inputDate.setAttribute("value", new Date(value).toISOString().split('T')[0].slice(0, 10));
                    return inputDate;
                }

                function handleSwitch(num) {
                    let inputSwitch = document.getElementById("activationSwitch" + num);
                    database[num].activated = inputSwitch.checked;
                }

                function handleSwitch2(num) {
                    let inputSwitch = document.getElementById("premiumPageSwitch" + num);
                    array = Object.keys(pages);
                    pages[array[num]] = inputSwitch.checked;
                    console.log(pages);
                }

                function handleInputDate(num) {
                    let inputDate = document.getElementById("activationExpiredDate" + num);
                    let myDate = inputDate.value;
                    myDate = myDate.split("-");
                    let newDate = new Date(myDate[0], myDate[1] - 1, myDate[2]);
                    database[num].activation_expired = (newDate.getTime() + 86399000);
                    console.log("date: " + (newDate.getTime() + 8639900));
                }

                function handleButton(num, id) {
                    let deleteButton = document.getElementById("deleteAccountConfirmationButton");
                    $("#deleteAccountModal").modal("show");
                    deleteButton.addEventListener("click", function() {
                        console.log("database delete " + num);
                        //database = database.filter((i) => i.item !== 1)
                        database = database.filter((i) => i.id !== id);
                        console.log(id + " " + database);
                        //database.splice(num, 1);
                        //console.log(database);
                        refreshTable();
                        $("#deleteAccountModal").modal("hide");
                    });
                }

                function deletePage(num) {
                    array = Object.keys(pages);
                    array = null;
                }

                function handleButton2(num, id) {
                    let deleteButton = document.getElementById("deletePageConfirmationButton");
                    $("#deletePremiumPageModal").modal("show");
                    console.log("button " + num);
                    deleteButton.addEventListener("click", function() {
                        console.log("buttonModal " + id);
                        //console.log("database delete " + JSON.stringify(pages));
                        //deletePage(num);
                        //console.log("page " + array[num]);
                        //delete pages[array[num]];
                        //console.log("database delete " + JSON.stringify(pages));
                        /*pages = Object.fromEntries(
                            Object.entries(pages).
                                filter(([key, value]) => 
                                    key !== id)
                        );*/
                        pages = Object.fromEntries(Object.entries(pages).filter(([key, value]) => key !== id));
                        refreshTable();
                        $("#deletePremiumPageModal").modal("hide");
                    });
                }

                function addUserTable(num, photo, id, info, activated, expired) {
                    var tr = document.createElement('tr');
                    tr.setAttribute("id", "userTable" + num);
                    var td = document.createElement('td');
                    td.appendChild(document.createTextNode(num + 1));
                    tr.appendChild(td);
                    var td2 = document.createElement('td');
                    td2.appendChild(createImg(photo, "user-info-img", 64, 64));
                    tr.appendChild(td2);
                    var td3 = document.createElement('td');
                    td3.innerHTML = info;
                    tr.appendChild(td3);
                    var td4 = document.createElement('td');
                    console.log(num + ", " + activated);
                    td4.appendChild(createSwitch("Aktivasi", "activationSwitch" + num, activated, "handleSwitch(" + num + ");"));
                    tr.appendChild(td4);
                    var td5 = document.createElement('td');
                    td5.appendChild(createDateInput("activationExpiredDate" + num, expired, "handleInputDate(" + num + ");"));
                    tr.appendChild(td5);
                    var td6 = document.createElement('td');
                    td6.appendChild(createButton("Hapus akun", "deleteAccountButton" + num, "btn btn-danger", "handleButton(" + num + ", " + id + ");"));
                    tr.appendChild(td6);
                    table01.appendChild(tr);
                }

                function addPremiumPageTable(num, id, premium) {
                    var tr = document.createElement('tr');
                    tr.setAttribute("id", "premiumPageTable" + num);
                    var td = document.createElement('td');
                    td.appendChild(document.createTextNode(num + 1));
                    tr.appendChild(td);
                    var td2 = document.createElement('td');
                    td2.appendChild(document.createTextNode("ID: " + id));
                    tr.appendChild(td2);
                    var td3 = document.createElement('td');
                    td3.appendChild(createSwitch("Premium", "premiumPageSwitch" + num, premium, "handleSwitch2(" + num + ", '" + id + "');"));
                    tr.appendChild(td3);
                    var td4 = document.createElement('td');
                    td4.appendChild(createButton("Hapus", "deletePageButton" + num, "btn btn-danger", "handleButton2(" + num + ", '" + id + "');"));
                    tr.appendChild(td4);
                    table02.appendChild(tr);
                }
        </script>
    </body>
</html>